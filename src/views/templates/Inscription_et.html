<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inscription √âtudiant - EduConnect Africa</title>
    <script src="https://cdn.tailwindcss.com"></script>
     <link rel="stylesheet" href="./src/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
        
        * {
            font-family: 'Poppins', sans-serif;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 50%, #1e293b 100%);
            position: relative;
            overflow: hidden;
        }
        
        .gradient-bg::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, rgba(245, 158, 11, 0.1) 0%, transparent 70%);
            animation: pulse 8s ease-in-out infinite;
        }
        
        .gradient-bg::after {
            content: '';
            position: absolute;
            bottom: -50%;
            left: -50%;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, rgba(236, 72, 153, 0.1) 0%, transparent 70%);
            animation: pulse 10s ease-in-out infinite reverse;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1) translate(0, 0); }
            50% { transform: scale(1.2) translate(10%, 10%); }
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .input-focus:focus {
            border-color: #f59e0b;
            box-shadow: 0 0 0 4px rgba(245, 158, 11, 0.1);
            transform: translateY(-2px);
        }
        
        .input-field {
            transition: all 0.3s ease;
            border: 2px solid #e5e7eb;
        }
        
        .input-field:hover {
            border-color: #f59e0b;
        }
        
        .country-dropdown {
            max-height: 280px;
            overflow-y: auto;
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(10px);
            border: 2px solid #f59e0b;
        }
        
        .country-dropdown::-webkit-scrollbar {
            width: 8px;
        }
        
        .country-dropdown::-webkit-scrollbar-track {
            background: #f3f4f6;
        }
        
        .country-dropdown::-webkit-scrollbar-thumb {
            background: #f59e0b;
            border-radius: 4px;
        }
        
        .country-item {
            transition: all 0.2s ease;
        }
        
        .country-item:hover {
            background: linear-gradient(90deg, rgba(245, 158, 11, 0.1), rgba(236, 72, 153, 0.1));
            transform: translateX(5px);
        }
        
        .error-shake {
            animation: shake 0.4s;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-8px); }
            20%, 40%, 60%, 80% { transform: translateX(8px); }
        }
        
        .btn-gradient {
            background: linear-gradient(135deg, #f59e0b 0%, #ec4899 100%);
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(245, 158, 11, 0.3);
        }
        
        .btn-gradient:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(245, 158, 11, 0.4);
        }
        
        .btn-gradient:active {
            transform: translateY(-1px);
        }
        
        .radio-custom {
            appearance: none;
            width: 20px;
            height: 20px;
            border: 2px solid #d1d5db;
            border-radius: 50%;
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .radio-custom:checked {
            border-color: #f59e0b;
            background: #f59e0b;
        }
        
        .radio-custom:checked::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 8px;
            height: 8px;
            background: white;
            border-radius: 50%;
        }
        
        .floating-icon {
            position: absolute;
            animation: float 6s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(5deg); }
        }
        
        .label-icon {
            color: #f59e0b;
            margin-right: 8px;
            font-size: 16px;
        }
        
        select {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%23f59e0b'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 12px center;
            background-size: 20px;
            padding-right: 40px;
        }
        
        .success-pulse {
            animation: successPulse 0.5s ease;
        }
        
        @keyframes successPulse {
            0% { transform: scale(0.95); opacity: 0; }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); opacity: 1; }
        }
        
        /* Styles pour la force du mot de passe */
        .password-strength-bar {
            height: 6px;
            border-radius: 3px;
            transition: all 0.3s ease;
            width: 0%;
        }
        
        .password-strength-text {
            font-size: 12px;
            margin-top: 4px;
            transition: all 0.3s ease;
        }
        
        .strength-weak { background: linear-gradient(90deg, #ef4444 0%, #f87171 100%); }
        .strength-medium { background: linear-gradient(90deg, #f59e0b 0%, #fbbf24 100%); }
        .strength-strong { background: linear-gradient(90deg, #10b981 0%, #34d399 100%); }
        
        .strength-text-weak { color: #ef4444; }
        .strength-text-medium { color: #f59e0b; }
        .strength-text-strong { color: #10b981; }
        
        .password-requirements {
            font-size: 11px;
            margin-top: 4px;
        }
        
        .requirement-met {
            color: #10b981;
        }
        
        .requirement-not-met {
            color: #9ca3af;
        }
        
        .eye-toggle {
            cursor: pointer;
            transition: color 0.2s ease;
        }
        
        .eye-toggle:hover {
            color: #f59e0b;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-gray-50 to-gray-100 min-h-screen">
    <div class="flex min-h-screen">
        <!-- Section Image avec d√©grad√© -->
        <div class="hidden lg:flex lg:w-1/2 gradient-bg items-center justify-center p-12 relative">
            <div class="text-center text-white z-10 relative">
                <!-- Ic√¥nes flottantes d√©coratives -->
                <i class="fas fa-book floating-icon text-yellow-500 text-3xl" style="top: 10%; left: 15%; animation-delay: 0s;"></i>
                <i class="fas fa-graduation-cap floating-icon text-pink-500 text-4xl" style="top: 20%; right: 20%; animation-delay: 1s;"></i>
                <i class="fas fa-pencil-alt floating-icon text-yellow-400 text-2xl" style="bottom: 25%; left: 10%; animation-delay: 2s;"></i>
                <i class="fas fa-globe-africa floating-icon text-pink-400 text-5xl" style="bottom: 15%; right: 15%; animation-delay: 1.5s;"></i>
                
                <div class="mb-8">
                    <div class="inline-block p-6 rounded-full bg-gradient-to-br from-yellow-500 to-pink-500 shadow-2xl mb-6">
                        <i class="fas fa-graduation-cap text-7xl"></i>
                    </div>
                </div>
                <h1 class="text-5xl font-bold mb-6 bg-gradient-to-r from-yellow-400 to-pink-400 bg-clip-text text-transparent">
                    Bienvenue sur  <span style="background: linear-gradient(90deg, #ff3131, #ff914d); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">Edu</span><span style="background: linear-gradient(90deg, #8c52ff, #5ce1e6); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">Connect</span>
                    <span style="background: linear-gradient(90deg, #8c52ff, #ff914d); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">Africa</span>
                </h1>
                <p class="text-2xl mb-12 text-gray-200">Votre portail √©ducatif pour l'excellence acad√©mique</p>
                
                <div class="grid grid-cols-3 gap-8 mt-16">
                    <div class="text-center group cursor-pointer">
                        <div class="bg-white bg-opacity-10 p-6 rounded-2xl backdrop-blur-sm transition-all duration-300 group-hover:bg-opacity-20 group-hover:scale-110">
                            <i class="fas fa-book-open text-5xl mb-3 text-yellow-400"></i>
                            <p class="text-sm font-medium">Cours en ligne</p>
                        </div>
                    </div>
                    <div class="text-center group cursor-pointer">
                        <div class="bg-white bg-opacity-10 p-6 rounded-2xl backdrop-blur-sm transition-all duration-300 group-hover:bg-opacity-20 group-hover:scale-110">
                            <i class="fas fa-users text-5xl mb-3 text-pink-400"></i>
                            <p class="text-sm font-medium">Communaut√©</p>
                        </div>
                    </div>
                    <div class="text-center group cursor-pointer">
                        <div class="bg-white bg-opacity-10 p-6 rounded-2xl backdrop-blur-sm transition-all duration-300 group-hover:bg-opacity-20 group-hover:scale-110">
                            <i class="fas fa-brain text-5xl mb-3 text-cyan-300 drop-shadow-lg"></i>
                            <p class="text-sm font-medium">Assistant IA </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Section Formulaire -->
        <div class="w-full lg:w-1/2 flex items-center justify-center p-6 lg:p-12">
            <div class="max-w-md w-full">
                <!-- Logo -->
                <div class="text-center mb-10">
                    <div class="inline-block mb-6">
                        <img 
                            src="../../../Images/Logo.png" 
                            alt="Logo EduConnect Africa"
                            class="w-32 h-32 object-contain mx-auto"
                        />
                    </div>
                    <h2 class="text-4xl font-bold bg-gradient-to-r from-yellow-600 to-pink-600 bg-clip-text text-transparent mb-3">
                        Cr√©er un compte
                    </h2>
                    <p class="text-gray-600 text-lg">Rejoignez la communaut√© EduConnect Africa</p>
                </div>

                <!-- Formulaire -->
                <form id="registrationForm" class="space-y-6">
                    <!-- Nom et Pr√©nom -->
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">
                                <i class="fas fa-user label-icon"></i>Nom
                            </label>
                            <input type="text" id="nom" name="nom" required
                                class="w-full px-4 py-3 input-field rounded-xl input-focus outline-none bg-white"
                                placeholder="Votre nom">
                            <p class="error-message text-red-500 text-xs mt-2 hidden font-medium"></p>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">
                                <i class="fas fa-user label-icon"></i>Pr√©nom
                            </label>
                            <input type="text" id="prenom" name="prenom" required
                                class="w-full px-4 py-3 input-field rounded-xl input-focus outline-none bg-white"
                                placeholder="Votre pr√©nom">
                            <p class="error-message text-red-500 text-xs mt-2 hidden font-medium"></p>
                        </div>
                    </div>

                    <!-- Sexe -->
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-3">
                            <i class="fas fa-venus-mars label-icon"></i>Sexe
                        </label>
                        <div class="flex gap-8">
                            <label class="flex items-center cursor-pointer group">
                                <input type="radio" name="sexe" value="masculin" required class="radio-custom">
                                <span class="ml-3 text-gray-700 font-medium group-hover:text-yellow-600 transition">Masculin</span>
                            </label>
                            <label class="flex items-center cursor-pointer group">
                                <input type="radio" name="sexe" value="feminin" required class="radio-custom">
                                <span class="ml-3 text-gray-700 font-medium group-hover:text-pink-600 transition">F√©minin</span>
                            </label>
                        </div>
                        <p class="error-message text-red-500 text-xs mt-2 hidden font-medium"></p>
                    </div>

                    <!-- Email -->
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">
                            <i class="fas fa-envelope label-icon"></i>Email
                        </label>
                        <div class="relative">
                            <input type="email" id="email" name="email" required
                                class="w-full px-4 py-3 input-field rounded-xl input-focus outline-none bg-white pr-12"
                                placeholder="exemple@email.com">
                            <i class="fas fa-at absolute right-4 top-4 text-gray-400"></i>
                        </div>
                        <p class="error-message text-red-500 text-xs mt-2 hidden font-medium"></p>
                        <p class="success-message text-green-600 text-xs mt-2 hidden font-medium success-pulse">
                            <i class="fas fa-check-circle"></i> Email valide et v√©rifi√©
                        </p>
                    </div>

                    <!-- Mot de passe -->
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">
                            <i class="fas fa-lock label-icon"></i>Mot de passe
                        </label>
                        <div class="relative">
                            <input type="password" id="password" name="password" required
                                class="w-full px-4 py-3 input-field rounded-xl input-focus outline-none bg-white pr-12"
                                placeholder="Cr√©ez un mot de passe s√©curis√©">
                            <i class="fas fa-eye eye-toggle absolute right-4 top-4 text-gray-400"></i>
                        </div>
                        
                        <!-- Barre de force du mot de passe -->
                        <div class="mt-3">
                            <div class="password-strength-bar"></div>
                            <div class="flex justify-between items-center mt-1">
                                <span class="password-strength-text text-xs font-medium"></span>
                                <span class="password-score text-xs font-bold"></span>
                            </div>
                            
                           
                    </div>

                    <!-- Confirmation du mot de passe -->
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">
                            <i class="fas fa-lock label-icon"></i>Confirmer le mot de passe
                        </label>
                        <div class="relative">
                            <input type="password" id="confirmPassword" name="confirmPassword" required
                                class="w-full px-4 py-3 input-field rounded-xl input-focus outline-none bg-white pr-12"
                                placeholder="R√©p√©tez votre mot de passe">
                            <i class="fas fa-eye eye-toggle absolute right-4 top-4 text-gray-400"></i>
                        </div>
                        <p class="error-message text-red-500 text-xs mt-2 hidden font-medium"></p>
                        <p class="success-message text-green-600 text-xs mt-2 hidden font-medium success-pulse hidden">
                            <i class="fas fa-check-circle"></i> Les mots de passe correspondent
                        </p>
                    </div>

                    <!-- Langue -->
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">
                            <i class="fas fa-language label-icon"></i>Langue
                        </label>
                        <select id="langue" name="langue" required
                            class="w-full px-4 py-3 input-field rounded-xl input-focus outline-none bg-white appearance-none cursor-pointer">
                            <option value="">S√©lectionnez une langue</option>
                            <option value="francais">üá´üá∑ Fran√ßais</option>
                            <option value="anglais">üá¨üáß Anglais</option>
                        </select>
                        <p class="error-message text-red-500 text-xs mt-2 hidden font-medium"></p>
                    </div>

                    <!-- Pays -->
                    <div class="relative">
                        <label class="block text-sm font-semibold text-gray-700 mb-2">
                            <i class="fas fa-globe-africa label-icon"></i>Pays
                        </label>
                        <div class="relative">
                            <input type="text" id="paysInput" autocomplete="off"
                                class="w-full px-4 py-3 input-field rounded-xl input-focus outline-none bg-white pr-12"
                                placeholder="Rechercher votre pays...">
                            <i class="fas fa-search absolute right-4 top-4 text-gray-400"></i>
                        </div>
                        <input type="hidden" id="paysSelected" name="pays">
                        <div id="paysDropdown" class="absolute z-10 w-full country-dropdown rounded-xl shadow-2xl mt-2 hidden">
                            <div id="paysResults" class="py-2"></div>
                        </div>
                        <p class="error-message text-red-500 text-xs mt-2 hidden font-medium"></p>
                    </div>

                     <!-- T√©l√©phone -->
                    <div class="mt-8">
                        <label class="block text-sm font-semibold text-gray-700 mb-1 lg:mb-2">
                            <i class="fas fa-phone label-icon"></i>T√©l√©phone
                        </label>
                        <div class="flex flex-col lg:flex-row gap-3 ">
                            <input type="text" id="countryCode" readonly
                                class="w-full lg:w-24 px-4 py-3 input-field rounded-xl bg-gradient-to-br from-yellow-50 to-pink-50 text-center font-bold text-gray-700 text-sm lg:text-base"
                                placeholder="+___">
                            <input type="tel" id="telephone" name="telephone" required
                                class="w-full px-4 py-3 input-field rounded-xl input-focus outline-none bg-white pr-12"
                                placeholder="Num√©ro de t√©l√©phone">
                        </div>
                        <p class="error-message text-red-500 text-xs mt-1 lg:mt-2 hidden font-medium"></p>
                    </div>

                    <!-- Bouton Submit -->
                    <button type="submit" id="submitBtn"
                        class="w-full btn-gradient text-white py-4 mt-4 rounded-xl font-bold text-lg">
                        <span id="btnText">
                            <i class="fas fa-user-plus mr-2"></i> S'inscrire maintenant
                        </span>
                        <span id="btnLoader" class="hidden">
                            <i class="fas fa-spinner fa-spin mr-2"></i> Inscription en cours...
                        </span>
                    </button>
                </form>

                <!-- Lien de connexion -->
                <div class="mt-6 lg:mt-8 text-center">
                    <p class="text-gray-600 text-sm lg:text-base">
                        Vous avez d√©j√† un compte ?
                        <a href="#" class="font-bold bg-gradient-to-r from-yellow-600 to-pink-600 bg-clip-text text-transparent hover:from-yellow-700 hover:to-pink-700 transition-all">
                            Connectez-vous ici 
                        </a>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script>
// Configuration API
const API_TOKEN = '2ad1ffe2de6acb841251b8f5694ec531e074f130';
const API_BASE_URL = 'https://aaapis.com/api/v1';

// Liste des pays africains (stock√©e en m√©moire pour performances)
let africanCountries = [];

// √âl√©ments DOM
const form = document.getElementById('registrationForm');
const paysInput = document.getElementById('paysInput');
const paysSelected = document.getElementById('paysSelected');
const paysDropdown = document.getElementById('paysDropdown');
const paysResults = document.getElementById('paysResults');
const countryCode = document.getElementById('countryCode');
const emailInput = document.getElementById('email');
const telephoneInput = document.getElementById('telephone');
const submitBtn = document.getElementById('submitBtn');
const btnText = document.getElementById('btnText');
const btnLoader = document.getElementById('btnLoader');
const passwordInput = document.getElementById('password');
const confirmPasswordInput = document.getElementById('confirmPassword');
const passwordStrengthBar = document.querySelector('.password-strength-bar');
const passwordStrengthText = document.querySelector('.password-strength-text');
const passwordScore = document.querySelector('.password-score');
const eyeToggles = document.querySelectorAll('.eye-toggle');

// Charger les pays africains au chargement de la page
window.addEventListener('DOMContentLoaded', async () => {
    await loadAfricanCountries();
    
    // Gestion de l'affichage/masquage des mots de passe
    eyeToggles.forEach(eye => {
        eye.addEventListener('click', function() {
            const input = this.parentElement.querySelector('input');
            const isPassword = input.type === 'password';
            
            input.type = isPassword ? 'text' : 'password';
            this.className = isPassword ? 'fas fa-eye-slash eye-toggle absolute right-4 top-4 text-yellow-500' 
                                        : 'fas fa-eye eye-toggle absolute right-4 top-4 text-gray-400';
        });
    });
    
    // Initialiser la v√©rification du mot de passe
    passwordInput.addEventListener('input', checkPasswordStrength);
    confirmPasswordInput.addEventListener('input', checkPasswordMatch);
});

// Fonction pour v√©rifier la force du mot de passe
function checkPasswordStrength() {
    const password = passwordInput.value;
    let score = 0;
    const requirements = {
        length: password.length >= 8,
        uppercase: /[A-Z]/.test(password),
        lowercase: /[a-z]/.test(password),
        number: /[0-9]/.test(password),
        special: /[!@#$%^&*]/.test(password)
    };
    
    // Calcul du score
    if (requirements.length) score += 20;
    if (requirements.uppercase) score += 20;
    if (requirements.lowercase) score += 20;
    if (requirements.number) score += 20;
    if (requirements.special) score += 20;
    
    // Mettre √† jour les exigences visuelles
    updateRequirements(requirements);
    
    // Mettre √† jour la barre de force
    updateStrengthBar(score);
    
    // V√©rifier la correspondance si le champ de confirmation n'est pas vide
    if (confirmPasswordInput.value) {
        checkPasswordMatch();
    }
}

// Mettre √† jour l'affichage des exigences
function updateRequirements(requirements) {
    Object.keys(requirements).forEach(req => {
        const element = document.querySelector(`.requirement-${req}`);
        const icon = element.querySelector('i');
        if (requirements[req]) {
            icon.classList.remove('requirement-not-met');
            icon.classList.add('requirement-met');
            icon.className = 'fas fa-check-circle text-xs mr-2 requirement-met';
        } else {
            icon.classList.remove('requirement-met');
            icon.classList.add('requirement-not-met');
            icon.className = 'fas fa-circle text-xs mr-2 requirement-not-met';
        }
    });
}

// Mettre √† jour la barre de force avec animation
function updateStrengthBar(score) {
    // Animation de la barre
    passwordStrengthBar.style.width = '0%';
    setTimeout(() => {
        passwordStrengthBar.style.width = `${score}%`;
    }, 10);
    
    // D√©terminer le niveau de force
    let strength = '';
    let strengthClass = '';
    let textClass = '';
    
    if (score <= 40) {
        strength = 'Faible';
        strengthClass = 'strength-weak';
        textClass = 'strength-text-weak';
    } else if (score <= 80) {
        strength = 'Moyen';
        strengthClass = 'strength-medium';
        textClass = 'strength-text-medium';
    } else {
        strength = 'Fort';
        strengthClass = 'strength-strong';
        textClass = 'strength-text-strong';
    }
    
    // Appliquer les classes
    passwordStrengthBar.className = `password-strength-bar ${strengthClass}`;
    passwordStrengthText.textContent = `Force du mot de passe: ${strength}`;
    passwordStrengthText.className = `password-strength-text ${textClass}`;
    passwordScore.textContent = `${score}/100`;
    passwordScore.className = `password-score ${textClass}`;
    
    // Animation du texte
    passwordStrengthText.style.transform = 'scale(1.1)';
    setTimeout(() => {
        passwordStrengthText.style.transform = 'scale(1)';
    }, 150);
}

// V√©rifier si les mots de passe correspondent
function checkPasswordMatch() {
    const password = passwordInput.value;
    const confirmPassword = confirmPasswordInput.value;
    const errorMsg = confirmPasswordInput.parentElement.querySelector('.error-message');
    const successMsg = confirmPasswordInput.parentElement.querySelector('.success-message');
    
    if (confirmPassword.length === 0) {
        errorMsg.classList.add('hidden');
        successMsg.classList.add('hidden');
        confirmPasswordInput.classList.remove('border-red-500', 'border-green-500');
        return;
    }
    
    if (password === confirmPassword) {
        errorMsg.classList.add('hidden');
        successMsg.classList.remove('hidden');
        successMsg.classList.add('success-pulse');
        confirmPasswordInput.classList.remove('border-red-500');
        confirmPasswordInput.classList.add('border-green-500');
    } else {
        errorMsg.textContent = '‚ùå Les mots de passe ne correspondent pas';
        errorMsg.classList.remove('hidden');
        successMsg.classList.add('hidden');
        confirmPasswordInput.classList.remove('border-green-500');
        confirmPasswordInput.classList.add('border-red-500');
    }
}

// Fonction pour charger les pays africains via l'API RestCountries
async function loadAfricanCountries() {
    try {
        const response = await fetch('https://restcountries.com/v3.1/region/africa', {
            method: 'GET',
            headers: {
                'Content-Type': 'application/json'
            }
        });

        if (response.ok) {
            const data = await response.json();
            // Formater les donn√©es pour correspondre √† notre structure
            africanCountries = data.map(country => ({
                name: country.translations.fra?.common || country.name.common,
                code: country.cca2,
                flag: country.flag,
                phone_code: country.idd.root + (country.idd.suffixes?.[0] || '')
            })).sort((a, b) => a.name.localeCompare(b.name));
        } else {
            // Liste de secours des principaux pays africains
            africanCountries = getFallbackAfricanCountries();
        }
    } catch (error) {
        console.error('Erreur lors du chargement des pays:', error);
        africanCountries = getFallbackAfricanCountries();
    }
}

// V√©rifier si un pays est africain (liste de secours)
function isAfricanCountry(countryName) {
    const africanCountryNames = [
        'Algeria', 'Angola', 'Benin', 'Botswana', 'Burkina Faso', 'Burundi',
        'Cameroon', 'Cape Verde', 'Central African Republic', 'Chad', 'Comoros',
        'Congo', 'Democratic Republic of the Congo', 'Djibouti', 'Egypt',
        'Equatorial Guinea', 'Eritrea', 'Ethiopia', 'Gabon', 'Gambia', 'Ghana',
        'Guinea', 'Guinea-Bissau', 'Ivory Coast', 'Kenya', 'Lesotho', 'Liberia',
        'Libya', 'Madagascar', 'Malawi', 'Mali', 'Mauritania', 'Mauritius',
        'Morocco', 'Mozambique', 'Namibia', 'Niger', 'Nigeria', 'Rwanda',
        'Sao Tome and Principe', 'Senegal', 'Seychelles', 'Sierra Leone',
        'Somalia', 'South Africa', 'South Sudan', 'Sudan', 'Swaziland',
        'Tanzania', 'Togo', 'Tunisia', 'Uganda', 'Zambia', 'Zimbabwe'
    ];
    return africanCountryNames.some(name => 
        countryName.toLowerCase().includes(name.toLowerCase())
    );
}

// Liste de secours des pays africains avec indicatifs
function getFallbackAfricanCountries() {
    return [
        { name: 'Cameroun', code: 'CM', flag: 'üá®üá≤', phone_code: '+237' },
        { name: 'S√©n√©gal', code: 'SN', flag: 'üá∏üá≥', phone_code: '+221' },
        { name: 'C√¥te d\'Ivoire', code: 'CI', flag: 'üá®üáÆ', phone_code: '+225' },
        { name: 'Nigeria', code: 'NG', flag: 'üá≥üá¨', phone_code: '+234' },
        { name: 'Ghana', code: 'GH', flag: 'üá¨üá≠', phone_code: '+233' },
        { name: 'Kenya', code: 'KE', flag: 'üá∞üá™', phone_code: '+254' },
        { name: 'Afrique du Sud', code: 'ZA', flag: 'üáøüá¶', phone_code: '+27' },
        { name: '√âgypte', code: 'EG', flag: 'üá™üá¨', phone_code: '+20' },
        { name: 'Maroc', code: 'MA', flag: 'üá≤üá¶', phone_code: '+212' },
        { name: 'Tunisie', code: 'TN', flag: 'üáπüá≥', phone_code: '+216' },
        { name: 'Alg√©rie', code: 'DZ', flag: 'üá©üáø', phone_code: '+213' },
        { name: '√âthiopie', code: 'ET', flag: 'üá™üáπ', phone_code: '+251' },
        { name: 'Tanzanie', code: 'TZ', flag: 'üáπüáø', phone_code: '+255' },
        { name: 'Ouganda', code: 'UG', flag: 'üá∫üá¨', phone_code: '+256' },
        { name: 'Mali', code: 'ML', flag: 'üá≤üá±', phone_code: '+223' },
        { name: 'Burkina Faso', code: 'BF', flag: 'üáßüá´', phone_code: '+226' },
        { name: 'Niger', code: 'NE', flag: 'üá≥üá™', phone_code: '+227' },
        { name: 'Tchad', code: 'TD', flag: 'üáπüá©', phone_code: '+235' },
        { name: 'Gabon', code: 'GA', flag: 'üá¨üá¶', phone_code: '+241' },
        { name: 'Congo', code: 'CG', flag: 'üá®üá¨', phone_code: '+242' },
        { name: 'RD Congo', code: 'CD', flag: 'üá®üá©', phone_code: '+243' },
        { name: 'Benin', code: 'BJ', flag: 'üáßüáØ', phone_code: '+229' },
        { name: 'Togo', code: 'TG', flag: 'üáπüá¨', phone_code: '+228' },
        { name: 'Rwanda', code: 'RW', flag: 'üá∑üáº', phone_code: '+250' }
    ];
}

// Recherche de pays
paysInput.addEventListener('input', (e) => {
    const searchTerm = e.target.value.toLowerCase().trim();
    
    if (searchTerm.length === 0) {
        paysDropdown.classList.add('hidden');
        paysSelected.value = '';
        countryCode.value = '';
        return;
    }

    const filteredCountries = africanCountries.filter(country => 
        country.name.toLowerCase().includes(searchTerm)
    );

    if (filteredCountries.length > 0) {
        displayCountryResults(filteredCountries);
        paysDropdown.classList.remove('hidden');
    } else {
        paysDropdown.classList.add('hidden');
    }
});

// Afficher les r√©sultats de pays
function displayCountryResults(countries) {
    paysResults.innerHTML = '';
    
    countries.forEach(country => {
        const countryItem = document.createElement('div');
        countryItem.className = 'country-item px-4 py-3 cursor-pointer flex items-center gap-3 hover:bg-blue-50 transition';
        
        const flag = country.flag || country.emoji || 'üè≥Ô∏è';
        const phoneCode = country.phone_code || country.calling_code || '';
        
        countryItem.innerHTML = `
            <span class="text-2xl">${flag}</span>
            <div class="flex-1">
                <div class="font-medium text-gray-800">${country.name}</div>
                ${phoneCode ? `<div class="text-sm text-gray-500">${phoneCode}</div>` : ''}
            </div>
        `;
        
        countryItem.addEventListener('click', () => {
            selectCountry(country);
        });
        
        paysResults.appendChild(countryItem);
    });
}

// S√©lectionner un pays
function selectCountry(country) {
    const flag = country.flag || country.emoji || 'üè≥Ô∏è';
    const phoneCode = country.phone_code || country.calling_code || '';
    
    paysInput.value = `${flag} ${country.name}`;
    paysSelected.value = country.name;
    countryCode.value = phoneCode;
    paysDropdown.classList.add('hidden');
    
    // Effacer le message d'erreur
    const errorMsg = paysInput.parentElement.querySelector('.error-message');
    if (errorMsg) {
        errorMsg.classList.add('hidden');
        paysInput.classList.remove('border-red-500');
    }
}

// Fermer le dropdown si on clique ailleurs
document.addEventListener('click', (e) => {
    if (!paysInput.contains(e.target) && !paysDropdown.contains(e.target)) {
        paysDropdown.classList.add('hidden');
    }
});

// Validation de l'email avec l'API
let emailValidationTimeout;
let isEmailValidating = false;

emailInput.addEventListener('input', (e) => {
    clearTimeout(emailValidationTimeout);
    
    const email = e.target.value.trim();
    const errorMsg = emailInput.parentElement.parentElement.querySelector('.error-message');
    const successMsg = emailInput.parentElement.parentElement.querySelector('.success-message');
    const loadingIcon = emailInput.parentElement.querySelector('.fa-at');
    
    // Cacher les messages
    errorMsg.classList.add('hidden');
    successMsg.classList.add('hidden');
    emailInput.classList.remove('border-red-500', 'border-green-500');
    
    // R√©initialiser l'ic√¥ne
    if (loadingIcon) {
        loadingIcon.className = 'fas fa-at absolute right-4 top-4 text-gray-400';
    }
    
    if (email.length === 0) return;
    
    // Validation basique du format
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (!emailRegex.test(email)) {
        errorMsg.textContent = '‚ùå Format d\'email invalide';
        errorMsg.classList.remove('hidden');
        emailInput.classList.add('border-red-500');
        if (loadingIcon) {
            loadingIcon.className = 'fas fa-times-circle absolute right-4 top-4 text-red-500';
        }
        return;
    }
    
    // Afficher l'ic√¥ne de chargement
    if (loadingIcon) {
        loadingIcon.className = 'fas fa-spinner fa-spin absolute right-4 top-4 text-yellow-500';
    }
    
    // Attendre 1 seconde apr√®s la derni√®re frappe
    emailValidationTimeout = setTimeout(() => {
        validateEmailWithAPI(email);
    }, 1000);
});

// Valider l'email avec l'API
async function validateEmailWithAPI(email) {
    const errorMsg = emailInput.parentElement.parentElement.querySelector('.error-message');
    const successMsg = emailInput.parentElement.parentElement.querySelector('.success-message');
    const loadingIcon = emailInput.parentElement.querySelector('.fa-spinner');
    
    isEmailValidating = true;
    
    try {
        const response = await fetch(`${API_BASE_URL}/validate/email/`, {
            method: 'POST',
            headers: {
                'Authorization': `Token ${API_TOKEN}`,
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ email })
        });

        const data = await response.json();
        
        if (data.valid) {
            // Email valide
            successMsg.classList.remove('hidden');
            successMsg.classList.add('success-pulse');
            emailInput.classList.add('border-green-500');
            emailInput.classList.remove('border-red-500');
            
            // Changer l'ic√¥ne en succ√®s
            if (loadingIcon) {
                loadingIcon.className = 'fas fa-check-circle absolute right-4 top-4 text-green-500';
            }
        } else {
            // Email invalide
            errorMsg.textContent = '‚ùå Cet email n\'est pas valide';
            errorMsg.classList.remove('hidden');
            emailInput.classList.add('border-red-500');
            emailInput.classList.remove('border-green-500');
            
            // Changer l'ic√¥ne en erreur
            if (loadingIcon) {
                loadingIcon.className = 'fas fa-times-circle absolute right-4 top-4 text-red-500';
            }
        }
    } catch (error) {
        console.error('Erreur validation email:', error);
        // En cas d'erreur API, afficher un message d'avertissement
        errorMsg.textContent = '‚ö†Ô∏è Impossible de v√©rifier l\'email (erreur r√©seau)';
        errorMsg.classList.remove('hidden');
        emailInput.classList.add('border-yellow-500');
        
        if (loadingIcon) {
            loadingIcon.className = 'fas fa-exclamation-triangle absolute right-4 top-4 text-yellow-500';
        }
    } finally {
        isEmailValidating = false;
    }
}

// Validation du t√©l√©phone
telephoneInput.addEventListener('input', (e) => {
    const phone = e.target.value.replace(/\D/g, '');
    e.target.value = phone;
    
    const errorMsg = telephoneInput.parentElement.querySelector('.error-message');
    
    if (phone.length > 0 && phone.length < 8) {
        errorMsg.textContent = 'Le num√©ro doit contenir au moins 8 chiffres';
        errorMsg.classList.remove('hidden');
        telephoneInput.classList.add('border-red-500');
    } else {
        errorMsg.classList.add('hidden');
        telephoneInput.classList.remove('border-red-500');
    }
});

// Validation du formulaire
form.addEventListener('submit', async (e) => {
    e.preventDefault();
    
    // R√©initialiser les messages d'erreur
    document.querySelectorAll('.error-message').forEach(msg => {
        msg.classList.add('hidden');
    });
    document.querySelectorAll('input, select').forEach(input => {
        input.classList.remove('border-red-500', 'error-shake');
    });
    
    let isValid = true;
    const errors = [];
    
    // Validation Nom
    const nom = document.getElementById('nom').value.trim();
    if (nom.length < 2) {
        showError('nom', 'Le nom doit contenir au moins 2 caract√®res');
        isValid = false;
    }
    
    // Validation Pr√©nom
    const prenom = document.getElementById('prenom').value.trim();
    if (prenom.length < 2) {
        showError('prenom', 'Le pr√©nom doit contenir au moins 2 caract√®res');
        isValid = false;
    }
    
    // Validation Sexe
    const sexe = document.querySelector('input[name="sexe"]:checked');
    if (!sexe) {
        const sexeContainer = document.querySelector('input[name="sexe"]').closest('div').parentElement;
        const errorMsg = sexeContainer.querySelector('.error-message');
        errorMsg.textContent = 'Veuillez s√©lectionner votre sexe';
        errorMsg.classList.remove('hidden');
        isValid = false;
    }
    
    // Validation Email
    const email = emailInput.value.trim();
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (!emailRegex.test(email)) {
        showError('email', '‚ùå Email invalide');
        isValid = false;
    } else if (!emailInput.classList.contains('border-green-500')) {
        // V√©rifier si l'email a √©t√© valid√© par l'API
        const errorMsgEmail = emailInput.parentElement.parentElement.querySelector('.error-message');
        errorMsgEmail.textContent = '‚ö†Ô∏è Veuillez attendre la validation de l\'email';
        errorMsgEmail.classList.remove('hidden');
        emailInput.classList.add('border-yellow-500');
        isValid = false;
    }
    
    // Validation Mot de passe
    const password = passwordInput.value;
    if (password.length < 8) {
        showError('password', 'Le mot de passe doit contenir au moins 8 caract√®res');
        isValid = false;
    }
    
    // Validation force du mot de passe
    const passwordScoreValue = parseInt(passwordScore.textContent.split('/')[0]);
    if (passwordScoreValue < 60) {
        showError('password', 'Le mot de passe est trop faible. Am√©liorez-le pour continuer.');
        isValid = false;
    }
    
    // Validation Confirmation mot de passe
    const confirmPassword = confirmPasswordInput.value;
    if (password !== confirmPassword) {
        showError('confirmPassword', '‚ùå Les mots de passe ne correspondent pas');
        isValid = false;
    }
    
    // Validation Langue
    const langue = document.getElementById('langue').value;
    if (!langue) {
        showError('langue', 'Veuillez s√©lectionner une langue');
        isValid = false;
    }
    
    // Validation Pays
    if (!paysSelected.value) {
        const errorMsg = paysInput.parentElement.querySelector('.error-message');
        errorMsg.textContent = 'Veuillez s√©lectionner un pays';
        errorMsg.classList.remove('hidden');
        paysInput.classList.add('border-red-500', 'error-shake');
        isValid = false;
    }
    
    // Validation T√©l√©phone
    const telephone = telephoneInput.value.replace(/\D/g, '');
    if (telephone.length < 8) {
        showError('telephone', 'Le num√©ro doit contenir au moins 8 chiffres');
        isValid = false;
    }
    
    if (!countryCode.value) {
        showError('telephone', 'Veuillez s√©lectionner un pays d\'abord');
        isValid = false;
    }
    
    if (!isValid) {
        return;
    }
    
    // Afficher le loader
    btnText.classList.add('hidden');
    btnLoader.classList.remove('hidden');
    submitBtn.disabled = true;
    
    // Simuler l'envoi (remplacer par votre logique d'envoi)
    setTimeout(() => {
        const formData = {
            nom: nom,
            prenom: prenom,
            sexe: sexe.value,
            email: email,
            password: password,
            langue: langue,
            pays: paysSelected.value,
            telephone: countryCode.value + telephone
        };
        
        console.log('Donn√©es du formulaire:', formData);
        
        // Afficher un message de succ√®s
        alert('Inscription r√©ussie ! Bienvenue sur EduConnect Africa.');
        
        // R√©initialiser le formulaire
        form.reset();
        paysInput.value = '';
        paysSelected.value = '';
        countryCode.value = '';
        passwordStrengthBar.style.width = '0%';
        passwordStrengthText.textContent = '';
        passwordScore.textContent = '';
        
        // R√©initialiser les exigences
        document.querySelectorAll('.requirement i').forEach(icon => {
            icon.className = 'fas fa-circle text-xs mr-2 requirement-not-met';
        });
        
        // Masquer le loader
        btnText.classList.remove('hidden');
        btnLoader.classList.add('hidden');
        submitBtn.disabled = false;
    }, 2000);
});

// Fonction pour afficher les erreurs
function showError(fieldId, message) {
    const field = document.getElementById(fieldId);
    const errorMsg = field.parentElement.querySelector('.error-message');
    
    if (errorMsg) {
        errorMsg.textContent = message;
        errorMsg.classList.remove('hidden');
    }
    
    field.classList.add('border-red-500', 'error-shake');
    
    // Retirer l'animation apr√®s 300ms
    setTimeout(() => {
        field.classList.remove('error-shake');
    }, 300);
}
    </script>
</body>
</html>